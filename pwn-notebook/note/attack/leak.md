
泄漏内存是攻击前的准备工作，目的是获取目标程序更多信息（运行时信息）

说道泄漏内存，就要从保护机制说起

# ASLR & PIE
ASLR和PIE是两个关于程序地址保护防御机制。

PIE是对于二进制程序而言的，编译时选择开启PIE保护，则程序的各个段的基地址将在程序运行时分配。

ASLR是对于操作系统而言的，开启ASLR保护机制的系统，对每个运行的进程的内存进行随机化布局。

简单说，只有PIE和ASLR同时开启，进程的地址才是真正的随机化。

只开PIE不开ASLR，则进程每次分配的各段基地址不会变。
只开ASLR不开PIE，则程序运行后程序各段的基地址固定，但是libc和stack等不属于程序的段，基地址还是随机的。

> 在没有保护机制的时代，地址大多是固定的，可以通过静态分析得到，不需要泄漏

# 泄漏

## 泄漏canary

## 泄漏libc

## 泄漏text

### 由libc泄漏text
程序如果使用stdin,stdout,stderr这三个文件流，则可以通过libc泄漏text基址
简单的说就是bss和text段基址之间的偏移量是固定的，使用上述文件流，程序编译后会在bss段有相应的指针。
在程序运行后，libc中有个指针指向bss段中的这个指针，也就是说libc中存有bss段的变量的地址
通过泄漏这个位于bss的指针地址，就可算得text段基址
详见栗子： [TG:Hack2020-carp](http://taqini.space/2020/04/08/TG-Hack-CTF-Pwn-writeup/#crap-319pt)

